<html xmlns:th="https://www.thymeleaf.org" ng-app="starter">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>Reservas</title>
        <link rel="icon" type="image/jpg" href="/favicons/logoHiberus.jpg" sizes="16x16">
        <link href="//code.ionicframework.com/nightly/css/ionic.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
        <link rel="stylesheet" href="/css/estilosReservas.css">
        <link rel="stylesheet" href="/css/all.css">
        <link rel="stylesheet" href="/css/bootstrap.css">
        <link rel="stylesheet" href="/fonts/font-awesome-4.3.0/css/font-awesome.min.css">
        <style>
   
            #footer{
                border-top: 1px solid #D3D3D3;
                width:100vw;
                display:block;
                height:auto;
                background-color: #f4f4f4;
                overflow:hidden;
                margin-top: 10px;
                }
            footer 
                .container{
                    position:relative;
                    margin-top:-50px;
                }

        </style>
        <script src="/js/calendarioReservas.js"></script>
        <script th:inline="javascript">

            $(document).ready(function() {
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();
            /*  className colors
             
             className: default(transparent), important(red), chill(pink), success(green), info(blue)
             
             */


            /* initialize the external events
             -----------------------------------------------------------------*/

            $('#external-events div.external-event').each(function() {

            // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
            // it doesn't need to have a start or end
            var eventObject = {
            title: $.trim($(this).text()) // use the element's text as the event title
            };
            // store the Event Object in the DOM element so we can get to it later
            $(this).data('eventObject', eventObject);
            // make the event draggable using jQuery UI
            $(this).draggable({
            zIndex: 999,
                    revert: true, // will cause the event to go back to its
                    revertDuration: 0  //  original position after the drag
            });
            });
            /* initialize the calendar
             -----------------------------------------------------------------*/

            var calendar = $('#calendar').fullCalendar({
            header: {
            left: 'title',
                    center: 'agendaDay,agendaWeek,month',
                    right: 'prev,next today'
            },
                    editable: true,
                    firstDay: 1, //  1(Monday) this can be changed to 0(Sunday) for the USA system
                    selectable: true,
                    defaultView: 'month',
                    axisFormat: 'h:mm',
                    columnFormat: {
                    month: 'ddd', // Mon
                            week: 'ddd d', // Mon 7
                            day: 'dddd M/d', // Monday 9/7
                            agendaDay: 'dddd d'
                    },
                    titleFormat: {
                    month: 'MMMM yyyy', // September 2009
                            week: "MMMM yyyy", // September 2009
                            day: 'MMMM yyyy'                  // Tuesday, Sep 8, 2009
                    },
                    allDaySlot: false,
                    selectHelper: true,
                    select: function(start, end, allDay) {
                    var title = prompt('Event Title:');
                    if (title) {
                    calendar.fullCalendar('renderEvent',
                    {
                    title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                    },
                            true // make the event "stick"
                            );
                    }
                    calendar.fullCalendar('unselect');
                    },
                    droppable: true, // this allows things to be dropped onto the calendar !!!
                    drop: function(date, allDay) { // this function is called when something is dropped

                    // retrieve the dropped element's stored Event Object
                    var originalEventObject = $(this).data('eventObject');
                    // we need to copy it, so that multiple events don't have a reference to the same object
                    var copiedEventObject = $.extend({}, originalEventObject);
                    // assign it the date that was reported
                    copiedEventObject.start = date;
                    copiedEventObject.allDay = allDay;
                    // render the event on the calendar
                    // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
                    // is the "remove after drop" checkbox checked?
                    if ($('#drop-remove').is(':checked')) {
                    // if so, remove the element from the "Draggable Events" list
                    $(this).remove();
                    }

                    },
                    events: [
                            /*[# th:each="evt:${eventos}" ]*/
                            {
                                title: [[${evt?.instalaciones?.Nombre}]],
                                start: [[${evt.Fecha}]],
                                end: [[${evt.Fecha}]],
                                url: 'https://ccp.cloudaccess.net/aff.php?aff=5188',
                                className: 'success'
                            },
                            /*[/]*/
                    ],
            });
            });
        </script>
        <style>

            body {
                margin-bottom: 40px;
                margin-top: 40px;
                text-align: center;
                font-size: 14px;
                font-family: 'Roboto', sans-serif;
                
            }

            .calendar-wrapper {
                display: flex;
                align-items: center;
                margin-top: 100px;
            }

            #wrap {
                margin: 0 auto;
            }

            #external-events {
                float: left;
                width: 150px;
                padding: 0 10px;
                text-align: left;
            }

            #external-events h4 {
                font-size: 16px;
                margin-top: 0;
                padding-top: 1em;
            }

            .external-event { /* try to mimick the look of a real event */
                margin: 10px 0;
                padding: 2px 4px;
                background: #3366CC;
                color: #fff;
                font-size: .85em;
                cursor: pointer;
            }

            #external-events p {
                margin: 1.5em 0;
                font-size: 11px;
                color: #666;
            }

            #external-events p input {
                margin: 0;
                vertical-align: middle;
            }

            #calendar {
                /* 		float: right; */
                margin: 0 auto;
                width: 900px;
                background-color: #FFFFFF;
                border-radius: 6px;
                box-shadow: 0 1px 2px #C3C3C3;
                -webkit-box-shadow: 0px 0px 21px 2px rgba(0,0,0,0.18);
                -moz-box-shadow: 0px 0px 21px 2px rgba(0,0,0,0.18);
                box-shadow: 0px 0px 21px 2px rgba(0,0,0,0.18);
            }

        </style>
    </head>
    <body>
    <div class="fondo"></div>
        <header id="header">
            <div class="header-container">
                <div class="logo">
                    <a href="/index">
                        <img src="https://fontmeme.com/permalink/210914/1918944ede0bcc7058a0694909fe8184.png" alt="fuente-de-los-vengadores" border="0">
                    </a>
                </div>
                <nav id="nav">
                    <div class="opener-holder">
                        <a href="#" class="nav-opener"><span></span></a>
                    </div>

                    <div class="nav-drop">
                        <ul>
                            <li class="active visible-sm visible-xs"><a href="/index">Inicio</a></li>
                            <li><a href="/reservas" class="btn btn-primary rounded">Reservas</a></li>
                            <li><a href="instalaciones/vistaInstalacion" class="btn btn-primary rounded">Instalaciones</a></li>
                            <li><a href="/contacto" class="btn btn-primary rounded">Contacto</a></li>
                            <li><a href="/login" class="btn btn-primary rounded">Iniciar Sesión</a></li>
                        </ul>
                        <div class="drop-holder visible-sm visible-xs">
                            <span>Síguenos</span>
                            <ul class="social-networks">
                                <li><a class="fa fa-github" href="#"></a></li>
                                <li><a class="fa fa-twitter" href="#"></a></li>
                                <li><a class="fa fa-facebook" href="#"></a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </header>
        <div class="calendar-wrapper">
            <div id='wrap' class="col-xs-6">

                <div id="calendar"></div>

            </div>
            
            <i class="icono fas fa-chevron-circle-left" onclick="history.back()" style="font-size:70px;color:white; margin-left:20px;margin-top:20px;" ></i>
            <div class="col-xs-6">
                <div id="advanced-search-form">
                    <h2>Nueva reserva</h2>
                    <form action="/reservas/guardarReserva" th:object="${Reservas}" method="post" enctype="multipart/form-data">
                        <div class="reservas-wrapper">
                            <div class="form-group">
                                <label for="Fecha">Fecha</label>
                                <input type="text" th:field="*{Fecha}"  class="form-control" id="fecha" placeholder="2021-09-22 10:00">
                            </div>
                            <div class="form-group">
                                <label for="Precio">Precio</label>
                                <input type="text" disabled="true" th:value="${10}" class="form-control" id="precio">
                            </div>
                            <div class="form-group">
                                <label for="Instalación">Nombre instalación</label>
                                <select name="idInstalacion">
                                    <option th:each="insta:${Instalaciones}" th:text="${insta.Nombre}" th:value="${insta.IdInstalaciones}"></option> 
                                </select>
                                <!--<select name="select">
                                    <option value="pista de tenis">Pista de tenis</option>
                                    <option value="pista de padel" selected>Pista de padel</option>
                                    <option value="pista de baloncesto">Pista de baloncesto</option>
                                </select>-->
                                <!--<input type="text" class="form-control" id="instalacion" placeholder="Pista de tenis">-->
                            </div>
                            <div class="form-group">
                                <label for="Usuario">Nombre usuario</label>
                                <select name="idUsuario">
                                    <option th:each="usu:${Usuarios}" th:text="${usu.nombre}" th:value="${usu.id_usuario}"></option> 
                                </select>
                                <!--<select name="select">
                                    <option value="Sofia">Sofia</option>
                                    <option value="Marta" selected>Marta</option>
                                    <option value="Manuel">Manuel</option>
                                </select>-->
                                <!--<input type="text"  class="form-control" id="usuario" placeholder="Marta">-->
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <button type="submit" class="btn btn-primary p-5 mt-2"><i class="far fa-calendar-plus">Guardar</i></button>	
                        <!--<button type="submit" class="btn btn-info btn-lg btn-responsive" id="search"> <span class="glyphicon glyphicon-search"></span> Search</button>-->
                    </form>
                </div>
            </div>
        </div>
        
        <footer id="footer">
            <div class="container">

                <div class="footer-holder">


                    <div class="row">
                        <div class="col-md-6">
                            <h3>Localización</h3>
                            <p>
                                P.º Isabel la Católica, 6, 50009 Zaragoza
                            </p>
                            <p>
                                Teléfono: 976 10 66 20
                            </p>
                        </div>

                        <div class="col-md-6 text-right">
                            <ul class="social">
                                <li><a href="javascript:"><i class="fa fa-facebook-f"></i></a></li>
                                <li><a href="javascript:"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="javascript:"><i class="fa fa-paper-plane"></i></a></li>
                                <li><a href="javascript:"><i class="fa fa-github"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </body>
</html>
